{% extends "base_email.html" %}

{% block email_title %}You Won Lot #{{ lot_id | default('â€”') }} Â· {{ company_name }}{% endblock %}

{% block header_subtitle %}Great news from the auction floor{% endblock %}

{% block content_title %}Congratulations, You Won!{% endblock %}

{% block content_description %}
    Your bid of <strong>${{ bid_amount | default(0) }}</strong> secured lot <strong>#{{ lot_id | default('â€”') }}</strong>.
    Our team will contact you shortly with the next steps to finalize the purchase.
{% endblock %}

{% block main_content %}
    <div class="lot-preview-card">
        <div class="lot-image">
            {% if vehicle_image %}
                <img src="{{ vehicle_image }}" alt="{{ vehicle_title }}" />
            {% else %}
                <div class="lot-image__placeholder">Image unavailable</div>
            {% endif %}
        </div>
        <div class="lot-details">
            <p class="lot-id">Lot #{{ lot_id | default('â€”') }}</p>
            <h2 class="vehicle-title">{{ vehicle_title | default('Vehicle title pending') }}</h2>
            <p class="auction-meta">
                Auction: <strong>{{ auction | default('â€”') }}</strong><br />
                Session time: <strong>{{ auction_data.strftime('%d %b %Y %H:%M %Z') if auction_data else 'â€”' }}</strong>
            </p>
        </div>
    </div>

    <div class="bid-stats">
        <div class="stat-block highlight">
            <p class="stat-label">Winning bid</p>
            <p class="stat-value">${{ final_bid | default(bid_amount) }}</p>
        </div>
        <div class="stat-block">
            <p class="stat-label">Your submitted bid</p>
            <p class="stat-value">${{ bid_amount | default(0) }}</p>
        </div>
    </div>

    <div class="notice-box success">
        <div class="icon">ðŸŽ‰</div>
        <div class="notice-text">
            Thank you for choosing {{ company_name | default('our marketplace') }}. Check your dashboard for payment and shipping options.
        </div>
    </div>
{% endblock %}

{% block additional_content %}
    <div class="info-block">
        <h3>Next steps:</h3>
        <ul class="next-steps">
            <li>Review the invoice and confirm your preferred payment method.</li>
            <li>Arrange pickup or shipping logistics right from your dashboard.</li>
            <li>Contact support if you need assistance with paperwork.</li>
        </ul>
    </div>
{% endblock %}

{% block custom_styles %}
    .lot-preview-card {
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        display: flex;
        gap: 20px;
        padding: 20px;
        align-items: center;
        background: #f5f7fa;
    }

    .lot-image img {
        border-radius: 10px;
        max-width: 180px;
        width: 100%;
        height: auto;
        display: block;
    }

    .lot-image__placeholder {
        width: 180px;
        height: 120px;
        border-radius: 10px;
        background: #e5e7eb;
        color: #6b7280;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
    }

    .lot-details {
        flex: 1;
    }

    .lot-id {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 6px;
    }

    .vehicle-title {
        font-size: 22px;
        margin-bottom: 10px;
        color: #111827;
    }

    .auction-meta {
        font-size: 15px;
        color: #4b5563;
        line-height: 1.5;
    }

    .bid-stats {
        display: flex;
        gap: 16px;
        margin: 30px 0;
    }

    .stat-block {
        flex: 1;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        background: #ffffff;
    }

    .stat-block.highlight {
        border-color: #111827;
        background: #f3f4f6;
    }

    .stat-label {
        font-size: 14px;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 8px;
    }

    .stat-value {
        font-size: 28px;
        font-weight: 600;
        color: #111827;
    }

    .next-steps {
        margin-top: 12px;
        padding-left: 18px;
        color: #4b5563;
    }

    .next-steps li {
        margin-bottom: 8px;
        font-size: 14px;
    }

    @media (max-width: 600px) {
        .lot-preview-card {
            flex-direction: column;
        }

        .bid-stats {
            flex-direction: column;
        }
    }
{% endblock %}
